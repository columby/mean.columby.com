<pre>Distribution: {{distribution}}</pre>

<div class="col-md-offset-3 col-md-6">

  <h2>Add a new datasource</h2>
  <div ng-bind-html="statusText"></div>

  <!-- Select the type of data upload -->
  <div class="type-select" ng-show="wizard.step === 1">
    <h2>Select the type of datasource</h2>
    <button class="btn btn-default"
      ng-click="initSync()">Synchronise an external service</button>
    <button class="btn btn-default"
      ng-click="initUpload()">Upload a file from your computer</button>
  </div>

  <!-- Upload a file -->
  <div class="" ng-show="wizard.step === 2">
    <h3>Upload a file</h3>
    <!--<div class="dropzone">Dropzone</div>-->
    <div class="row">
      <div class="col-xs-4">
        <label>Upload a datafile: </label>
      </div>
      <div class="col-xs-8">
        <input class="btn btn-default"
               type="file"
               name="file"
               ng-file-select="onFileSelect($files)">
      </div>
    </div>
    <div class="row" ng-show="uploadInProgress">
      <progressbar value="distribution.uploadProgress"></progressbar>
      <a href="#" ng-click="cancelUpload()">cancel</a>
    </div>
  </div>

  <!-- Sync a url -->
  <div class="" ng-show="wizard.step === 3">
    <h3>Sync a url</h3>
    <div class="col-xs-4">
      <label>Enter your url</label>
    </div>
    <div class="col-xs-6">
      <input class="form-control"
             placeholder="http://yourlink.url"
             ng-model="distribution.url"/>
    </div>
  </div>

  <!-- Add metadata -->
  <div class="" ng-show="wizard.step === 4" style="text-align:left;">
    <form class="form-horizontal novalidate" role="form" name="metadataForm">

      <div class="small">
        <div class="file-reference" ng-show="distribution.file_id">File: {{distribution.file.filename}} / {{distribution.file.filetype}}</div>
        <p><strong>Shortid:</strong>{{distribution.shortid}}<br />
        <p><strong>Type:</strong> {{distribution.type}}<br />
        <p><strong>Status:</strong> {{distribution.status}}<br />
        <p><strong>issued:</strong> {{distribution.created_at}}<br />
        <p><strong>modified:</strong> {{distribution.updated_at}}<br />
        <p><strong>rights:</strong><br />
        <p ng-show="distribution.type==='sync'"><strong>accessUrl:</strong><br />
        <p ng-show="distribution.type==='file'"><strong>downloadUrl:</strong> /file/{{distribution.id}}<br />
        <p><strong>mediaType:</strong> {{distribution.filetype}}<br/>
        <p><strong>format:</strong> { type: DataTypes.STRING }<br />
        <p><strong>byteSize:</strong> {{distribution.filesize}}</p>
      </div>

      <div class="form-group">
        <div class="col-xs-4"><label>Title</label></div>
        <div class="col-xs-8">
          <input class="form-control"
               name="title"
               ng-model="distribution.title"
               ng-minlength="3"
               ng-maxlength="30"/>
          <span class="error" ng-show="slugForm.slug.$error.maxlength">Too long!</span>
        </div>
      </div>

      <div class="form-group">
        <div class="col-xs-4">
          <label>Description</label>
        </div>
        <div class="col-xs-8">
          <textarea class="form-control"
            rows="5"
            placeholder="Please add your description"
            model="distribution.description"></textarea>
        </div>
      </div>

      <div class="form-group">
        <div class="col-xs-4">
          <label>License</label>
        </div>
        <div class="col-xs-8">
          <div class="btn-group">
            <label class="btn btn-success" ng-model="distribution.license" btn-radio="'dontKnow'">I don't know</label>
            <label class="btn btn-success" ng-model="distribution.license" btn-radio="'CC0'">CC0</label>
            <label class="btn btn-success" ng-model="distribution.license" btn-radio="'CCBYND'">CC-BY-ND</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="col-xs-4">
          <label>Visibility</label>
        </div>
        <div class="col-xs-8">
          <div class="btn-group">
            <label class="btn btn-success" ng-model="distribution.status" btn-radio="'draft'">Draft</label>
            <label class="btn btn-success" ng-model="distribution.status" btn-radio="'private'">Private</label>
            <label class="btn btn-success" ng-model="distribution.status" btn-radio="'public'">Public</label>
          </div>
        </div>
      </div>

      <p ng-show="distribution.type==='sync'"><strong>Sync Period:</strong> {{distribution.syncperiod}}</p>


      <button class="btn btn-default col-xs-offset-4"
              ng-click="updateMetadata()">Save</button>

      </form>

  </div>
  <!-- File Upload -->
  <!-- URL reference -->
</div>

<div data-ng-controller="ColumbyLoginCtrl" class="signin container">
  <div class="signin-header">
    <h1>Columby</h1>
  </div>

  <div class="row">
    <!-- login form -->
    <div class="login-form col-md-6">
      <h2>Login to continue</h2>
      <form class="form-horizontal novalidate" role="form" name="loginForm" ng-submit="passwordlessLogin()" >
        <div class="form-group">
          <div class="col-sm-12">
            <input required id="email" type="email" name="email" placeholder="Your email address" class="form-control" ng-model="credentials.email"/>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-4">
            <button type="submit" class="btn btn-default" ng-disabled="loginForm.$invalid || requestingToken">Login</button>
          </div>
          <div class="col-sm-8">
            <i class="icon-spin animate-spin" ng-show="loginInProgress">::</i>
            <div ng-show="loginForm.$invalid && !loginForm.$pristine" class="alert alert-warning" role="alert">
              <span ng-show="loginForm.email.$invalid && !loginForm.email.$pristine">Enter a valid email.</span>
            </div>
            <div ng-show="loginError" class="alert alert-danger" role="alert">
              {{loginError}}
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="register-form col-md-6">
      <h2>Register your account</h2>
      <form class="form-horizontal" role="form" name="registerForm" ng-submit="passwordlessRegister()">
        <div class="form-group">
          <div class="col-sm-12">
            <input type="email" class="form-control" id="email" name="email" placeholder="Email" ng-model="newuser.email" required>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-8">
            <input type="text" class="form-control" id="username" name="username" placeholder="Username" ng-minlength="3" ng-maxlength="20" ng-model="newuser.username" required>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-8">
            <p>I accept the <a ui-sref="terms">terms</a>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-2">
            <button type="submit" class="btn btn-default" ng-disabled="registrationInProgress || registerForm.username.$invalid || registerForm.email.$invalid" || registerForm.$invalid>Register</button>
          </div>
          <div class="col-sm-6">
            <i class="icon-spin animate-spin" ng-show="registrationInProgress">::</i>
            <div ng-show="registerForm.$invalid && !registerForm.$pristine" class="alert alert-warning" role="alert">
              <span ng-show="registerForm.email.$invalid && !registerForm.email.$pristine">Enter a valid email.</span>
              <span ng-show="registerForm.username.$invalid && !registerForm.username.$pristine">The username should between 3 and 20 characters.</span>
            </div>
            <div class="alert alert-danger animated fadeIn" ng-show="registrationError">{{registrationError}}</div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Verification madal -->
  <div class="verify-in-progress" ng-show="verifyInProgress">
    <h1>Signing in</h1>
    <p>Your verification token is checked for validity.</p>
    <div class="alert alert-danger animated fadeIn" ng-show="verificationError">{{verificationError}}</div>
    <a ui-sref="home">home</a>
  </div>

  <!-- Token request success madal -->
  <div class="signin-success" ng-show="signinSuccess">
    <h1>Check your inbox</h1>
    <p>The authentication was successful. You should receive a login link in your inbox soon.</p>
    <a ui-sref="home">home</a>
  </div>

  <!-- Registration request success -->
  <div class="registration-success" ng-show="registrationSuccess">
    <h1>Registration successful</h1>
    <p>The registration process was successful. You should receive a login link in your inbox soon.</p>
    <a ui-sref="home">home</a>
  </div>
</div>
